<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="https://docs.soda.io/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="./soda-cl_files/just-the-docs-default.css"> <script type="text/javascript" charset="UTF-8" async="" src="./soda-cl_files/state.js"></script><script async="" id="likebtn_wjs" src="./soda-cl_files/widget.js"></script><script type="text/javascript" async="" src="./soda-cl_files/analytics.min.js"></script><script id="Cookiebot" src="./soda-cl_files/uc.js" data-cbid="789afc41-df22-45f3-8fd9-981f78082b81" data-blockingmode="auto" type="text/javascript"></script><style type="text/css" id="CookieConsentStateDisplayStyles">.cookieconsent-optin,.cookieconsent-optin-preferences,.cookieconsent-optin-statistics,.cookieconsent-optin-marketing{display:block;display:initial;}.cookieconsent-optout-preferences,.cookieconsent-optout-statistics,.cookieconsent-optout-marketing,.cookieconsent-optout{display:none;}</style> <!-- Google tag (gtag.js) --> <script async="" src="./soda-cl_files/js"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-R6YJ1X2PYS'); </script> <script type="text/javascript" src="./soda-cl_files/lunr.min.js" data-cookieconsent="ignore"></script> <script type="text/javascript" src="./soda-cl_files/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Write SodaCL checks | Soda Documentation</title> <meta name="generator" content="Jekyll v4.2.1"> <meta property="og:title" content="Write SodaCL checks"> <meta property="og:locale" content="en_US"> <meta name="description" content="Soda Checks Language is a human-readable, domain-specific language for data reliability. You use SodaCL to define Soda Checks in a checks YAML file."> <meta property="og:description" content="Soda Checks Language is a human-readable, domain-specific language for data reliability. You use SodaCL to define Soda Checks in a checks YAML file."> <link rel="canonical" href="https://docs.soda.io/soda-cl/soda-cl-overview.html"> <meta property="og:url" content="https://docs.soda.io/soda-cl/soda-cl-overview.html"> <meta property="og:site_name" content="Soda Documentation"> <meta property="og:image" content="https://docs.soda.io/assets/og-card.png"> <meta name="twitter:card" content="summary_large_image"> <meta property="twitter:image" content="https://docs.soda.io/assets/og-card.png"> <meta property="twitter:title" content="Write SodaCL checks"> <script type="application/ld+json"> {"description":"Soda Checks Language is a human-readable, domain-specific language for data reliability. You use SodaCL to define Soda Checks in a checks YAML file.","url":"https://docs.soda.io/soda-cl/soda-cl-overview.html","@type":"WebPage","image":"https://docs.soda.io/assets/og-card.png","headline":"Write SodaCL checks","dateModified":"2024-05-29T21:59:27+00:00","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://docs.soda.io/assets/images/soda-logo.svg"}},"@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <script> !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="wCGutfHUiTjhKEL5ukhbMfH30qqOuXjw";;analytics.SNIPPET_VERSION="4.15.3"; analytics.load("wCGutfHUiTjhKEL5ukhbMfH30qqOuXjw"); analytics.page(); }}(); </script> <script> (function() { document.addEventListener('DOMContentLoaded', function() { try { let searchInputElm = document.querySelector("#search-input"); let siteNav = document.querySelector("#site-nav"); let mainHeader = document.querySelector("#main-header"); let menuButton = document.querySelector("#menu-button"); document.querySelector("#search-input-inline").addEventListener('keypress', function(e) { e.preventDefault(); if (window.innerWidth < 800 && !siteNav.classList.contains("nav-open") ) { siteNav.classList.add("nav-open"); mainHeader.classList.add("nav-open"); menuButton.classList.add("nav-open"); searchInputElm.scrollIntoView(); } searchInputElm.focus(); searchInputElm.value = e.key; searchInputElm.dispatchEvent(new Event('change')); }); }catch(e) { console.error("Failed to associate search-input binding", e); } var githubLi = document.createElement('li'); githubLi.setAttribute('class', 'aux-nav-list-item'); githubLi.innerHTML = '<iframe frameborder="0" scrolling="0" width="152" height="30" title="GitHub" src="https://ghbtns.com/github-btn.html?user=sodadata&repo=soda-core&type=star&count=true&size=large" class="aux-nav-list-item-github-iframe"></iframe>'; document.querySelector(".aux-nav-list").prepend(githubLi); var slackLi = document.createElement('li'); slackLi.setAttribute('class', 'aux-nav-list-item'); slackLi.innerHTML = '<a href="https://community.soda.io/slack" target="_blank" class="nav-slack-link"><img src="/assets/images/icon-slack.png" alt="Slack" class="nav-slack-img"/></a>'; document.querySelector(".aux-nav-list").prepend(slackLi); }); })(); </script> <script> var hsscript = document.createElement("script"); hsscript.id = "wphs"; hsscript.src = "https://cdn.jsdelivr.net/npm/hockeystack@latest/hockeystack.min.js"; hsscript.async = 1; hsscript.dataset.apikey = "724a5ecd2a7479778adb4b1f0d58a9"; hsscript.dataset.cookieless = 1; hsscript.dataset.autoIdentify = 1; document.getElementsByTagName('head')[0].append(hsscript); </script><script id="wphs" src="./soda-cl_files/hockeystack.min.js" async="" data-apikey="724a5ecd2a7479778adb4b1f0d58a9" data-cookieless="1" data-auto-identify="1"></script> <script src="./soda-cl_files/copyCode.js"></script> <link type="text/css" rel="stylesheet" href="./soda-cl_files/widget.css"><link type="text/css" rel="stylesheet" href="./soda-cl_files/style3.css"><link type="text/css" rel="stylesheet" href="./soda-cl_files/effect.css"></head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="https://docs.soda.io/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/">Home</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/quick-start-sip.html">Take a sip of Soda</a> </li> <li class="nav-list-item "> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a> <a class="nav-list-link" href="https://docs.soda.io/soda/get-started-roadmap.html">Get started</a> <ul class="nav-list "> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/get-started-roadmap.html">Get started roadmap</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/setup-guide.html">Choose a flavor of Soda</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-library/install.html">Install Soda Library</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-agent/managed-agent.html">Set up a Soda-hosted agent</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-agent/deploy.html">Deploy a Soda Agent</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-agent/secrets.html">Soda Agent extras</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-library/programmatic.html">Invoke Soda Library</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/upgrade.html">Upgrade, redeploy, uninstall</a> </li> </ul> </li> <li class="nav-list-item "> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a> <a class="nav-list-link" href="https://docs.soda.io/soda/use-case-guides.html">Use case guides</a> <ul class="nav-list "> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/use-case-guides.html">Use case guides</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/quick-start-prod.html">Test data in a pipeline</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/quick-start-migration.html">Test before data migration</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/quick-start-end-user.html">Self-serve Soda</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/quick-start-dev.html">Test data during development</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/quick-start-automate.html">Automate anomaly detection</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/quick-start-databricks.html">How to: Invoke Soda in Databricks</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/quick-start-secrets.html">How to: Add a Secrets Manager</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cloud/api-keys.html">How to: Generate API Keys</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/sensitive-data.html">How to: Manage sensitive data</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/route-failed-rows.html">How to: Reroute failed rows</a> </li> </ul> </li> <li class="nav-list-item active"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a> <a class="nav-list-link" href="https://docs.soda.io/soda-cl/soda-cl-overview.html">Write SodaCL checks</a> <ul class="nav-list "> <li class="nav-list-item"> <a class="nav-list-link active" href="https://docs.soda.io/soda-cl/soda-cl-overview.html">Write SodaCL checks</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/quick-start-sodacl.html">SodaCL tutorial</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cloud/sodagpt.html">Write checks with SodaGPT</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-library/check-suggestions.html">Adopt check suggestions</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/automated-monitoring.html">Add automated monitoring</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/profile.html">Profile data</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/sample-datasets.html">Sample data</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/compare.html">Compare data using SodaCL</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/custom-check-examples.html">Custom check examples</a> </li> </ul> </li> <li class="nav-list-item "> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a> <a class="nav-list-link" href="https://docs.soda.io/soda-library/run-a-scan.html">Run scans and view results</a> <ul class="nav-list "> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-library/run-a-scan.html">Run a scan and view results</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cloud/failed-rows.html">Examine failed rows</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cloud/scan-mgmt.html">Manage scheduled scans</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-library/orchestrate-scans.html">Configure orchestrated scans</a> </li> </ul> </li> <li class="nav-list-item "> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a> <a class="nav-list-link" href="https://docs.soda.io/soda-cloud/collaborate.html">Organize, alert, investigate</a> <ul class="nav-list "> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cloud/collaborate.html">Organize, alert, investigate</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cloud/anomaly-dashboard.html">Activate anomaly dashboards</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/check-attributes.html">Add check attributes</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cloud/notif-rules.html">Set notification rules</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cloud/organize-datasets.html">Organize datasets</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cloud/incidents.html">Create and track incidents</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cloud/roles-and-rights.html">Set roles and rights</a> </li> </ul> </li> <li class="nav-list-item "> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a> <a class="nav-list-link" href="https://docs.soda.io/soda/integrate-alation.html">Integrate Soda</a> <ul class="nav-list "> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/integrate-alation.html">Integrate with Alation</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/integrate-atlan.html">Integrate with Atlan</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/integrate-dbt.html">Integrate with dbt</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/integrate-github.html">Integrate with GitHub</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/integrate-jira.html">Integrate with Jira</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/integrate-metaphor.html">Integrate with Metaphor</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/integrate-msteams.html">Integrate with MS Teams</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/integrate-purview.html">Integrate with Purview</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/integrate-servicenow.html">Integrate with ServiceNow</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/integrate-slack.html">Integrate with Slack</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cloud/sso.html">Integrate with SSO</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/integrate-webhooks.html">Integrate webhooks</a> </li> </ul> </li> <li class="nav-list-item "> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a> <a class="nav-list-link" href="https://docs.soda.io/soda-cl/metrics-and-checks.html">SodaCL reference</a> <ul class="nav-list "> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/metrics-and-checks.html">Metrics and checks</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/optional-config.html">Optional check configurations</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/anomaly-detection.html">Anomaly detection checks</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/anomaly-score.html">Anomaly score checks (Deprecated)</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/check-template.html">Check template</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/cross-row-checks.html">Cross checks</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/distribution.html">Distribution checks</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/failed-rows-checks.html">Failed rows checks</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/filters.html">Filters and variables</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/for-each.html">For each</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/freshness.html">Freshness checks</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/group-by.html">Group by</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/group-evolution.html">Group evolution</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/missing-metrics.html">Missing metrics</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/numeric-metrics.html">Numeric metrics</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/recon.html">Reconciliation checks</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/reference.html">Reference checks</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/schema.html">Schema checks</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/user-defined.html">User-defined checks</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/validity-metrics.html">Validity metrics</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cl/troubleshoot.html">Troubleshoot SodaCL</a> </li> </ul> </li> <li class="nav-list-item "> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a> <a class="nav-list-link" href="https://docs.soda.io/soda/connect-athena.html">Data source reference</a> <ul class="nav-list "> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-athena.html">Connect to Athena</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-bigquery.html">Connect to BigQuery</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-clickhouse.html">Connect to ClickHouse</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-dask.html">Connect to Dask and Pandas</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-databricks.html">Connect to Databricks</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-denodo.html">Connect to Denodo</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-dremio.html">Connect to Dremio</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-duckdb.html">Connect to DuckDB</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-cloudsql.html">Connect to Google CloudSQL</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-db2.html">Connect to IBM DB2</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-file.html">Connect to a local file</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-motherduck.html">Connect to MotherDuck</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-mssql.html">Connect to MS SQL Server</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-mysql.html">Connect to MySQL</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-oracle.html">Connect to OracleDB</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-postgres.html">Connect to PostgreSQL</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-presto.html">Connect to Presto</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-redshift.html">Connect to Redshift</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-snowflake.html">Connect to Snowflake</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-spark.html">Connect to Spark</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-synapse.html">Connect to Synapse</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-trino.html">Connect to Trino</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/connect-vertica.html">Connect to Vertica</a> </li> </ul> </li> <li class="nav-list-item "> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a> <a class="nav-list-link" href="https://docs.soda.io/api-docs/public-cloud-api-v1.html">Soda Cloud API</a> <ul class="nav-list "> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/api-docs/public-cloud-api-v1.html">Soda Cloud API v1</a> </li> </ul> </li> <li class="nav-list-item "> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a> <a class="nav-list-link" href="https://docs.soda.io/api-docs/reporting-api-v1.html">Soda Cloud Reporting API</a> <ul class="nav-list "> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/api-docs/reporting-api-v1.html">Reporting API v1</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/api-docs/reporting-api-v1-migration-guide.html">Migration guide</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/api-docs/reporting-api-to-overview-dashboards.html">Build a reporting dashboard</a> </li> </ul> </li> <li class="nav-list-item "> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a> <a class="nav-list-link" href="https://docs.soda.io/soda/data-contracts.html">Create a data contract</a> <ul class="nav-list "> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/data-contracts.html">Set up data contracts</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/data-contracts-write.html">Write a data contract</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/data-contracts-verify.html">Verify a data contract</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/data-contracts-checks.html">Data contract check reference</a> </li> </ul> </li> <li class="nav-list-item "> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a> <a class="nav-list-link" href="https://docs.soda.io/soda/glossary.html">Learning resources</a> <ul class="nav-list "> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/glossary.html">Glossary</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/active-check.html">Active checks</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/product-overview.html">Soda product overview</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-library/how-library-works.html">How Soda works</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-agent/basics.html">Soda Agent basic concepts</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-cloud/soda-cloud-architecture.html">Soda architecture</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/data-privacy.html">Data security and privacy</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-library/usage-stats.html">Soda Library usage statistics</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/new-documentation.html">What's new in docs?</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/support.html">Support</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/community-coc.html">Soda Community Code of Conduct</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda/deprecated.html">Soda SQL is now Soda Core</a> </li> </ul> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/soda-core/overview-main.html">Soda Core</a> </li> <li class="nav-list-item "> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a> <a class="nav-list-link" href="https://docs.soda.io/release-notes/all.html">Release notes</a> <ul class="nav-list "> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/release-notes/all.html">Soda products</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/release-notes/soda-library.html">Soda Library</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/release-notes/soda-agent.html">Soda Agent</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/release-notes/soda-cloud.html">Soda Cloud</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/release-notes/soda-cloud-api.html">Soda Cloud API</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/release-notes/reporting-api.html">Soda Cloud Reporting API</a> </li> <li class="nav-list-item"> <a class="nav-list-link " href="https://docs.soda.io/release-notes/soda-core.html">Soda Core</a> </li> </ul> </li> </ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Soda Documentation" aria-label="Search Soda Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"><li class="aux-nav-list-item"><a href="https://community.soda.io/slack" target="_blank" class="nav-slack-link"><img src="./soda-cl_files/icon-slack.png" alt="Slack" class="nav-slack-img"></a></li><li class="aux-nav-list-item"><iframe frameborder="0" scrolling="0" width="152" height="30" title="GitHub" src="./soda-cl_files/github-btn.html" class="aux-nav-list-item-github-iframe"></iframe></li> <li class="aux-nav-list-item"> <a href="https://www.soda.io/" class="site-button" target="_blank" rel="noopener noreferrer"> Visit Soda.io </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="https://docs.soda.io/soda-cl/soda-cl-overview.html">Write SodaCL checks</a></li> <li class="breadcrumb-nav-list-item"><span>Write SodaCL checks</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="write-sodacl-checks"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#write-sodacl-checks" class="anchor-heading" aria-labelledby="write-sodacl-checks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Write SodaCL checks </h1> <!--Linked to UI, access Shlink--> <p><em>Last modified on 29-May-24</em></p> <p><strong>Soda Checks Language (SodaCL)</strong> is a YAML-based, domain-specific language for data reliability. Used in conjunction with Soda tools, you use SodaCL to write checks for data quality, then run a scan of the data in your data source to execute those checks. A <strong>Soda Check</strong> is a test that Soda performs when it scans a dataset in your data source.</p> <p>A <strong>Soda scan</strong> executes the checks you write in an agreement, in a checks YAML file, or inline in a programmatic invocation, and returns a result for each check: pass, fail, or error. Optionally, you can configure a check to warn instead of fail by setting an <a href="https://docs.soda.io/soda-cl/optional-config.html#add-alert-configurations">alert configuration</a>.</p> <p>As a step in the <strong>Get started roadmap</strong>, this guide offers instructions to define your first SodaCL checks in the Soda Cloud UI, in a checks YAML file, or within a programmatic invocation of Soda.</p> <h4 id="get-started-roadmap"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#get-started-roadmap" class="anchor-heading" aria-labelledby="get-started-roadmap"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Get started roadmap </h4> <ol> <li> <s><font color="#777777"> Choose a flavor of Soda </font></s> </li> <li> <s><font color="#777777">Set up Soda: install, deploy, or invoke</font></s> </li> <li><strong>Write SodaCL checks</strong> 📍 You are here!</li> <li>Run scans and review results</li> <li>Organize, alert, investigate</li> </ol> <p><br></p> <h4 id="examples"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#examples" class="anchor-heading" aria-labelledby="examples"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Examples </h4> <div class="code-header"> <button class="copy-code-button"> <svg class="copy-icon" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> </button> </div> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Checks for basic validations</span>
<span class="na">checks for dim_customer</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">row_count between 10 and </span><span class="m">1000</span>
  <span class="pi">-</span> <span class="s">missing_count(birth_date) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="na">invalid_percent(phone) &lt; 1 %</span><span class="pi">:</span>
      <span class="na">valid format</span><span class="pi">:</span> <span class="s">phone number</span>
  <span class="pi">-</span> <span class="na">invalid_count(number_cars_owned) = 0</span><span class="pi">:</span>
      <span class="na">valid min</span><span class="pi">:</span> <span class="m">1</span>
      <span class="na">valid max</span><span class="pi">:</span> <span class="m">6</span>
  <span class="pi">-</span> <span class="s">duplicate_count(phone) = </span><span class="m">0</span>

<span class="na">checks for dim_product</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">avg(safety_stock_level) &gt; </span><span class="m">50</span>
<span class="c1"># Checks for schema changes</span>
  <span class="pi">-</span> <span class="na">schema</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">Find forbidden, missing, or wrong type</span>
      <span class="na">warn</span><span class="pi">:</span>
        <span class="na">when required column missing</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">dealer_price</span><span class="pi">,</span> <span class="nv">list_price</span><span class="pi">]</span>
        <span class="na">when forbidden column present</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">credit_card</span><span class="pi">]</span>
        <span class="na">when wrong column type</span><span class="pi">:</span>
          <span class="na">standard_cost</span><span class="pi">:</span> <span class="s">money</span>
      <span class="na">fail</span><span class="pi">:</span>
        <span class="na">when forbidden column present</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">pii*</span><span class="pi">]</span>
        <span class="na">when wrong column index</span><span class="pi">:</span>
          <span class="na">model_name</span><span class="pi">:</span> <span class="m">22</span>

<span class="c1"># Check for freshness </span>
  <span class="pi">-</span> <span class="s">freshness (start_date) &lt; 1d</span>

<span class="c1"># Check for referential integrity</span>
<span class="na">checks for dim_department_group</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">values in (department_group_name) must exist in dim_employee (department_name)</span>
</code></pre></div></div> <h2 id="define-sodacl-checks"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#define-sodacl-checks" class="anchor-heading" aria-labelledby="define-sodacl-checks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Define SodaCL checks </h2> <div class="warpper"> <input class="radio" id="one" name="group" type="radio" checked=""> <input class="radio" id="two" name="group" type="radio"> <input class="radio" id="three" name="group" type="radio"> <div class="tabs"> <label class="tab" id="one-tab" for="one">Use no-code checks</label> <label class="tab" id="two-tab" for="two">Use an agreement</label> <label class="tab" id="three-tab" for="three">Use a YAML file</label> </div> <div class="panels"> <div class="panel" id="one-panel"> <p>Create <strong>no-code checks</strong> for data quality directly in the Soda Cloud user interface. When you create a no-code check, you also set a schedule for Soda to execute your check when it runs a scan of your data source.</p> <p>🎥 Watch a <a href="https://www.soda.io/resources/introducing-no-code-checks" target="_blank">5-minute video</a> for no-code checks and discussions, if you like!</p> <p><small>✖️ &nbsp;&nbsp; Requires Soda Core Scientific</small><br> <small>✖️ &nbsp;&nbsp; Requires Soda Core</small><br> <small>✖️ &nbsp;&nbsp; Requires Soda Library + Soda Cloud</small><br> <small>✔️ &nbsp;&nbsp; Requires Soda Agent + Soda Cloud</small><br> <br></p> <p><img src="./soda-cl_files/no-code-checks.png" alt="no-code-checks" height="500px" width="500px"></p> <h3 id="prerequisites"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#prerequisites" class="anchor-heading" aria-labelledby="prerequisites"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prerequisites </h3> <ul> <li>You, or an Admin on your Soda Cloud account, has <a href="https://docs.soda.io/soda-agent/deploy.html">deployed a Soda Agent</a> version 0.8.52 or greater, and connected it to your Soda Cloud account.</li> <li>You, or an Admin on your Soda Cloud account, has <a href="https://docs.soda.io/soda-agent/deploy.html#add-a-new-data-source">added a new datasource</a> via the Soda Agent in your Soda Cloud account <em>and</em> configured the data source to <a href="https://docs.soda.io/soda-cl/profile.html#add-dataset-discovery">discover the datasets</a> in the data source for which you want to write no-code checks. (Soda must have access to dataset names and column names to present those values in dropdown menus during no-code check creation.)</li> <li>You must have permission to edit the dataset as an Admin, Manager, or Editor; see <a href="https://docs.soda.io/soda-cloud/roles-and-rights.html">Roles and rights</a>.</li> </ul> <h3 id="create-a-new-check"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#create-a-new-check" class="anchor-heading" aria-labelledby="create-a-new-check"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create a new check </h3> <p>SodaCL includes over 25 built-in metrics that you can use to write checks, a subset of which are accessible via no-codecheck creation. The table below lists the checks available to create via the no-code interface; access <a href="https://docs.soda.io/soda-cl/metrics-and-checks.html">SodaCL reference</a> for detailed information about each metric or check.</p> <div class="table-wrapper"><table> <tbody><tr> <td>Missing<br> Validity<br> Numeric<br> Duplicate <br> Row count </td> <td>Freshness<br> Schema <br> SQL Failed rows<br> SQL Metric<br>&nbsp;<br></td> </tr> </tbody></table></div> <ol> <li>As an Admin, or Manager or Editor of a dataset to which you wish to add checks, navigate to the dataset, then click <strong>Add Check</strong>. You can only create a check via the no-code interface for datasets in data sources connected via a Soda Agent.</li> <li>Select the type of check you wish to create, then complete the form to create the check. Refer to table below for guidance on the values to enter.</li> <li>Optionally, <strong>Test</strong> your check, then click <strong>Propose check</strong> to initiate a <strong><a href="https://docs.soda.io/soda/glossary.html#discussion">Discussion</a></strong> with colleagues. Soda executes the check during the next scan according to the schedule you selected, or whenever a Soda Cloud user runs the schedule scan manually. <br>Be aware that a schema check requires a minimum of two measurements before it yields a useful check result because it needs at least one historical measurement of the existing schema against which to compare a new measurement to look for changes. Thus, the first time Soda executes this check, the result is <code class="language-plaintext highlighter-rouge">[NOT EVALUATED]</code>, indicated by a gray, question mark status icon.</li> <li>Click <strong>Add Check</strong> to include the new, no-code check in the next scheduled scan of the dataset.</li> <li>Optionally, you can manually execute your check immediately. From the dataset’s page, locate the check you just created and click the stacked dots, then select <strong>Execute Check</strong>. Soda executes <em>only</em> your check.</li> </ol> <div class="table-wrapper"><table> <thead> <tr> <th>Field or Label</th> <th>Guidance</th> </tr> </thead> <tbody> <tr> <td>Dataset</td> <td>Select the dataset to which you want the check to apply.</td> </tr> <tr> <td>Check Name</td> <td>Provide a unique name for your check.</td> </tr> <tr> <td>Add to Scan Definition</td> <td>Select the scan definition to which you wish to add your check. Optionally, you can click <strong>create a new Scan Definition</strong> if you want Soda to execute the check more or less frequently, or at a different time of day than existing scan definitions dictate. See <a href="https://docs.soda.io/soda-cloud/scan-mgmt.html">Manage scheduled scans</a> for details.</td> </tr> <tr> <td>Filter fields</td> <td>Optionally, add an <a href="https://docs.soda.io/soda-cl/optional-config.html#add-a-filter-to-a-check">in-check filter</a> to apply conditions that specify a portion of the data against which Soda executes the check.</td> </tr> <tr> <td>Define Metric/Values/Column/SQL</td> <td>As each metric or check requires different values, refer to <a href="https://docs.soda.io/soda-cl/metrics-and-checks.html">SodaCL reference</a> for detailed information about each metric or check. <br>Learn more about how <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#about-soda-ai-assistants">Soda uses OpenAI</a> to process the input for SQL and Regex assistants in no-code checks.</td> </tr> <tr> <td>Alert Level</td> <td>Select the check result state(s) for which you wish to be notified: Fail, Warn, or Fail and Warn. See <a href="https://docs.soda.io/soda-library/run-a-scan.html#view-scan-results">View scan results</a> for details. <br>By default, alert notifications for your check go to the <strong>Dataset Owner</strong>. See <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#define-alert-notification-rules">Define alert notification rules</a> to set up more alert notifications.</td> </tr> <tr> <td>Fail Condition, Value, and Value Type</td> <td>Set the values of these fields to specify the threshold that constitutes a fail or warn check result. <br> For example, if you are creating a <strong>Duplicate Check</strong> and you want to make sure that less than 5% of the rows in the column you identified contain duplicates, set <br>• <strong>Fail Condition</strong> to <code class="language-plaintext highlighter-rouge">&gt;</code> <br>• <strong>Value</strong> to <code class="language-plaintext highlighter-rouge">5</code> <br>• <strong>Value Type</strong> to <code class="language-plaintext highlighter-rouge">Percent</code></td> </tr> <tr> <td>Attribute fields</td> <td>Select from among the list of existing attributes to apply to your check so as to organize your checks and alert notifications in Soda Cloud. Refer to <a href="https://docs.soda.io/soda-cl/check-attributes.html">Add check attributes</a> for details.</td> </tr> </tbody> </table></div> <p><br></p> <h4 id="about-soda-ai-assistants"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#about-soda-ai-assistants" class="anchor-heading" aria-labelledby="about-soda-ai-assistants"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> About Soda AI assistants </h4> <!--Linked to UI, access Shlink--> <p>Powered by OpenAI’s GPT-3.5 &amp; GPT-4, the generative SQL and regular expression assistants available in Soda Cloud’s no-code checks helps you write the queries and expressions you can add to validity, missing, SQL failed rows, and SQL metric checks.</p> <p>When creating a Missing or Validity check in the no-code user interface in Soda Cloud, you can click for help from the <strong>Soda AI Regex Assistant</strong> to translate an English request into a regular expression you can use to define missing or valid values. Similarly, access the <strong>Soda AI SQL Assistant</strong> in SQL Failed Rows or SQL Metric checks to generate SQL queries based on requests in plain English.</p> <p><img src="./soda-cl_files/ask-ai.png" alt="ask-ai" height="600px" width="600px"></p> <p>Soda acknowledges that the output of the assistants may not be fully accurate or reliable. Leverage the assistants’ output, but be sure to carefully review all queries and expressions you add to your checks. Refer to <a href="https://www.soda.io/terms-and-conditions" target="_blank">Soda’s General Terms &amp; Conditions</a> for further details.</p> <p>Be aware that Soda shares the content of all SQL and Regex assistant prompts/input and output with OpenAI to perform the processing that yields the output. Following OpenAI’s suggestion, Soda also sends metadata, such as schema information, to OpenAI along with the prompts/input in order to improve the quality of the output. Read more about OpenAI at <a href="https://openai.com/policies" target="_blank">https://openai.com/policies</a>.</p> <p>Soda AI SQL and Regex Assistants are enabled for <em>new</em> Soda Cloud accounts by default. If you do not wish to use them, navigate to <strong>your avatar</strong> &gt; <strong>Organization Settings</strong>, then click to remove the check from the box for <strong>Enable SQL and Regex Assistants Powered By Powered by OpenAI</strong>.</p> <p>Existing Soda customers can review and accept the revised <a href="https://www.soda.io/terms-and-conditions" target="_blank">Terms &amp; Conditions</a>, then <a href="https://go.soda.io/join-soda-ai-preview" target="_blank">request access</a>.</p> <p>The <strong>Ask AI Assistant</strong>, available for <a href="https://go.soda.io/join-soda-ai-preview" target="_blank">preview access upon request</a>, is powered, in part, by kapa.ai. While Soda collaborates with third parties to develop certain AI features, it’s important to note that Soda does not disclose any primary data with our partners, such as data samples or data profiling details. We only share prompts and some schema information with OpenAI and kapa.ai to enhance the accuracy of the assistants.</p> <p><br></p> <h3 id="define-alert-notification-rules"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#define-alert-notification-rules" class="anchor-heading" aria-labelledby="define-alert-notification-rules"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Define alert notification rules </h3> <p>By default, alert notifications for your no-code check go to the <strong>Dataset Owner</strong> and <strong>Check Owner</strong>. If you wish to send alerts elsewhere, in addition to the owner, create a notification rule.</p> <p>For a new rule, you define conditions for sending notifications including the severity of a check result and whom to notify when bad data triggers an alert.</p> <p>In Soda Cloud, navigate to <strong>your avatar</strong> &gt; <strong>Notification Rules</strong>, then click <strong>New Notification Rule</strong>. Follow the guided steps to complete the new rule. Use the table below for insight into the values to enter in the fields and editing panels.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Field or Label</th> <th>Guidance</th> </tr> </thead> <tbody> <tr> <td>Name</td> <td>Provide a unique identifier for your notification.</td> </tr> <tr> <td>For</td> <td>Select <strong>All Checks</strong>, or select <strong>Selected Checks</strong> to use conditions to identify specific checks to which you want the rule to apply. You can identify checks according to several attributes such as <strong>Data Source Name</strong>, <strong>Dataset Name</strong>, or <strong>Check Name</strong>.</td> </tr> <tr> <td>Notify Recipient</td> <td>Select the destination to which this rule sends its notifications. For example, you can send the rule’s notifications to a channel in Slack.</td> </tr> <tr> <td>Notify About</td> <td>Identify the notifications this rule sends based on the severity of the check result: warn, fail, or both.</td> </tr> </tbody> </table></div> <p><br></p> <h3 id="edit-an-existing-check"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#edit-an-existing-check" class="anchor-heading" aria-labelledby="edit-an-existing-check"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Edit an existing check </h3> <ol> <li>As an Admin, or Manager or Editor of a dataset in which the no-code check exists, navigate to the dataset.</li> <li>To the right of the check you wish to edit, click the stacked dots, then select <strong>Edit Check</strong>. You can only edit a check via the no-code interface if it was first created as a no-code check, as indicated by the cloud icon in the <strong>Origin</strong> column of the table of checks.</li> <li>Adjust the check as needed, test your check, then save. Soda executes the check during the next scan according to the scan definition you selected.</li> <li>Optionally, you can execute your check immediately. Locate the check you just edited and click the stacked dots, then select <strong>Execute Check</strong>. Soda executes <em>only</em> your check.</li> </ol> </div> <div class="panel" id="two-panel"> <p>You can write SodaCL checks directly in the Soda Cloud user interface within an <strong>agreement</strong>. An agreement is a contract between stakeholders that stipulates the expected and agreed-upon state of data quality in a data source.</p> <p>In an agreement, use SodaCL checks to define the state of “good quality” for data in this data source, then identify and get approval from stakeholders in your organization. Define whom Soda Cloud will notify when a check in the agreement fails, then set a schedule to regularly execute the Soda Checks to uphold the tenets of the agreement.</p> <p><small>✖️ &nbsp;&nbsp; Requires Soda Core Scientific</small><br> <small>✖️ &nbsp;&nbsp; Requires Soda Core</small><br> <small>✖️ &nbsp;&nbsp; Requires Soda Library + Soda Cloud</small><br> <small>✔️ &nbsp;&nbsp; Requires Soda Agent + Soda Cloud</small><br> <br></p> <p><img src="./soda-cl_files/agreement-1.png" alt="agreement-1" height="500px" width="500px"></p> <h3 id="prerequisites-1"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#prerequisites-1" class="anchor-heading" aria-labelledby="prerequisites-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prerequisites </h3> <ul> <li>You, or an Admin on your Soda Cloud account, has <a href="https://docs.soda.io/soda-agent/deploy.html">deployed a Soda Agent</a> and connected it to your Soda Cloud account.</li> <li>You, or an Admin on your Soda Cloud account, has <a href="https://docs.soda.io/soda-agent/deploy.html#add-a-new-data-source">added a new datasource</a> via the Soda Agent in your Soda Cloud account.</li> </ul> <h3 id="create-a-new-agreement"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#create-a-new-agreement" class="anchor-heading" aria-labelledby="create-a-new-agreement"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create a new agreement </h3> <p>For a new agreement, you define several details including which data to check, what checks to execute during a scan, and whom to notify when bad data triggers an alert.</p> <p>In Soda Cloud, navigate to the <strong>Agreements</strong> dashboard, then click <strong>New Agreement</strong>. Follow the guided steps to complete the new agreement. Use the sections below for insight into the values to enter in the fields and editing panels in the guided steps.</p> <h4 id="select-a-data-source"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#select-a-data-source" class="anchor-heading" aria-labelledby="select-a-data-source"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Select a Data Source </h4> <p>You can only create an agreement that uses a data source that has been added to Soda Cloud via a Soda Agent.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Field or Label</th> <th>Guidance</th> </tr> </thead> <tbody> <tr> <td>Agreement Label</td> <td>Provide a name for your agreement.</td> </tr> <tr> <td>Data Source</td> <td>Select the data source that contains the datasets to which your agreement applies. <br> If you have no options to select in the dropdown, it is because you have not added a data source via a Soda Agent. You can only create agreements on datasets that are in a data source that has been onboarded into Soda Cloud via a Soda Agent.</td> </tr> </tbody> </table></div> <p><br></p> <h4 id="write-checks"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#write-checks" class="anchor-heading" aria-labelledby="write-checks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. Write Checks </h4> <p>Use SodaCL to define the checks that Soda Cloud executes on a regular schedule to uphold the tenets of this agreement. If any of these checks fail during a regularly-scheduled scan, Soda Cloud notifies the stakeholders you specify in the Notifications section.</p> <p>Be sure to click <strong>Test checks</strong> to validate that the SodaCL syntax you have written is valid, and that Soda can execute the checks against your datasets without errors.</p> <p>For help writing your first checks:</p> <ul> <li>browse the library of <strong>SodaCL snippets</strong> that insert correctly-formatted syntax for the most commonly-used checks for basic data quality</li> <li>use <strong>Ask SodaGPT</strong>, a generative AI assistant that turns natural-language requests into production-ready SodaCL checks. <a href="https://docs.soda.io/soda-cloud/sodagpt.html">Read more</a></li> <li>consider following the <a href="https://docs.soda.io/soda/quick-start-sodacl.html">Quick start for SodaCL</a>, including the <a href="https://docs.soda.io/soda/quick-start-sodacl.html#tips-and-best-practices-for-sodacl">Tips and best practices</a> section</li> <li>refer to <a href="https://docs.soda.io/soda-cl/metrics-and-checks.html">SodaCL reference</a> for exhaustive details on every type of metric and check</li> </ul> <p><img src="./soda-cl_files/sodacl-start.png" alt="sodacl-start" height="700px" width="700px"></p> <p><br></p> <h4 id="identify-stakeholders"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#identify-stakeholders" class="anchor-heading" aria-labelledby="identify-stakeholders"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. Identify Stakeholders </h4> <p>Add Stakeholders to this agreement who have an interest in maintaining or using the good-quality data in this data source. Consider adding a co-owner to your agreement for redundancy should you, as the agreement author, be absent.</p> <p>Soda Cloud sends emails to request review and approval from all stakeholders, and waits to run scans which execute checks in the agreement until all stakeholders have approved the agreement.</p> <p><br></p> <h4 id="set-notifications"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#set-notifications" class="anchor-heading" aria-labelledby="set-notifications"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4. Set Notifications </h4> <p>By default, Soda Cloud includes an out-of-the-box email notification to all the agreement’s stakeholders when a check in your agreement fails. You can remove or adjust this notification, or use the search bar to add more. Access <a href="https://docs.soda.io/soda-library/run-a-scan.html#view-scan-results">View scan results</a> to learn more about pass, warn, and fail check results.</p> <p>(Optional) If you have integrated your Soda Cloud account with <a href="https://docs.soda.io/soda/integrate-slack.html">Slack</a> or another third-party service provider via a <a href="https://docs.soda.io/soda/integrate-webhooks.html">webhook</a>, use the search field to type a channel name to add the channel as a notification recipient. Alternatively, use the field to enter names of individual teammates with whom you collaborate in Soda Cloud.</p> <p><br></p> <h4 id="set-a-scan-definition"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#set-a-scan-definition" class="anchor-heading" aria-labelledby="set-a-scan-definition"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5. Set a Scan Definition </h4> <p>After you have set up a new agreement, Soda Cloud sends approval requests to the stakeholders you identified in step 3. When stakeholders approve or reject your agreement, Soda Cloud sends you an email notification.</p> <p>Regardless of the approval status of the agreement, however, Soda Cloud begins running scans of your data according to the scan definition you set. Soda Cloud sends notifications after each scan according to the settings you defined in step 4.</p> <p>(Optional) You can click the link provided to create a new scan definition if you wish to run a scan to execute the checks in this agreement more or less frequently, or a different time of day, relative to the default scan definition for the data source.</p> <p>To review existing scan definitions, navigate to the <strong>Scans</strong> menu item.</p> <p><br></p> <h3 id="agreement-tips-and-best-practices"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#agreement-tips-and-best-practices" class="anchor-heading" aria-labelledby="agreement-tips-and-best-practices"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Agreement tips and best practices </h3> <p>Further, take into account the following tips and best practices when writing SodaCL checks in an agreement.</p> <ul> <li>Avoid applying the same <a href="https://docs.soda.io/soda-cl/optional-config.html#customize-check-names">customized check names</a> in multiple agreements. Soda Cloud associates check results with agreements according to name so if you reuse custom names, Soda Cloud may become confused about which agreement to which to link check results.</li> <li>If you use an <a href="https://docs.soda.io/soda-cl/anomaly-detection.html">anomaly detection check</a>, be aware that when you <strong>Test Checks</strong>, this type of checks results in <code class="language-plaintext highlighter-rouge">[NOT EVALUATED]</code>. The ML algorithm that anomaly detection checks use requires a minimum of four, regular-frequency scans before it has collected enough historic measurements against which to gauge an anomaly. Therefore, until it has collected enough historical measurements to use to gauge anomolies, Soda does not evaluate the check.</li> <li>Note that any checks you test in the context of this step in the agreements workflow <em>do not</em> appear as “real” checks in the <strong>Checks</strong> dashboard.</li> <li>Except with a NOW variable with freshness checks, you cannot use variables in checks you write in an agreement in Soda Cloud as it is impossible to provide the variable values at scan time.</li> </ul> <p>See also: <a href="https://docs.soda.io/soda/quick-start-sodacl.html#tips-and-best-practices-for-sodacl">Tips and best practices for SodaCL</a></p> </div> <div class="panel" id="three-panel"> <p>As a Data Engineer, you can write SodaCL checks directly in a <code class="language-plaintext highlighter-rouge">checks.yml</code> file, or leverage check suggestions in the Soda Library CLI to prepare a basic set of data quality checks for you. Alternatively, you can add SodaCL checks to a programmatic invocation of Soda Library.</p> <p><a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#manually-write-sodacl-checks">Manually write SodaCL checks</a><br> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#use-check-suggestions">Use check suggestions</a><br> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#programmatically-add-checks">Programmatically add checks</a><br> <br></p> <h3 id="manually-write-sodacl-checks"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#manually-write-sodacl-checks" class="anchor-heading" aria-labelledby="manually-write-sodacl-checks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Manually write SodaCL checks </h3> <p><small>✔️ &nbsp;&nbsp; Some checks require Soda Core Scientific</small><br> <small>✔️ &nbsp;&nbsp; Supported in Soda Core</small><br> <small>✔️ &nbsp;&nbsp; Supported in Soda Library + Soda Cloud</small><br> <small>✔️ &nbsp;&nbsp; Supported in Soda Cloud Agreements + Soda Agent</small><br> <br></p> <p>The checks YAML file stores the Soda Checks you write using SodaCL. Use this file to manually write your own SodaCL checks.</p> <ol> <li>Using a code editor, create a new file called <code class="language-plaintext highlighter-rouge">checks.yml</code>.</li> <li>Copy+paste the following basic check syntax in your file, then adjust the value for <code class="language-plaintext highlighter-rouge">dataset_name</code> to correspond with the name of one of the datasets in your data source. <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">checks for dataset_name</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">row_count &gt; </span><span class="m">0</span>
</code></pre></div> </div> </li> <li>Save the changes to the <code class="language-plaintext highlighter-rouge">checks.yml</code> file.</li> <li>To test the check and confirm the syntax is valid and error-free, use the following command to run a scan of the data in your data source. Replace the value for <code class="language-plaintext highlighter-rouge">my_datasource</code> with the name of the data source you added to your <code class="language-plaintext highlighter-rouge">configuration.yml</code> file. Read more about <a href="https://docs.soda.io/soda-library/run-a-scan.html">scans</a>. <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>soda scan <span class="nt">-d</span> my_datasource <span class="nt">-c</span> configuration.yml checks.yml
</code></pre></div> </div> <p>Command-line Output:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Soda Library 1.0.x
Scan summary:
1/1 check PASSED: 
 dim_customer <span class="k">in </span>adventureworks
   row_count <span class="o">&gt;</span> 0 <span class="o">[</span>PASSED]
All is good. No failures. No warnings. No errors.
Sending results to Soda Cloud
Soda Cloud Trace: 67592<span class="k">***</span>474
</code></pre></div> </div> </li> <li>Add more checks to the <code class="language-plaintext highlighter-rouge">checks.yml</code> file to test for multiple data quality metrics. Consult the <a href="https://docs.soda.io/soda/quick-start-sodacl.html">SodaCL tutorial</a> for advice and the <a href="https://docs.soda.io/soda/use-case-guides.html">Use case guides</a> for example checks. Refer to <a href="https://docs.soda.io/soda-cl/metrics-and-checks.html">SodaCL reference</a> for exhaustive details on every type of metric and check.</li> </ol> <h3 id="use-check-suggestions"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#use-check-suggestions" class="anchor-heading" aria-labelledby="use-check-suggestions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Use check suggestions </h3> <p><small>✔️ &nbsp;&nbsp; Requires Soda Core Scientific</small><br> <small>✖️ &nbsp;&nbsp; Supported in Soda Core</small><br> <small>✔️ &nbsp;&nbsp; Requires Soda Library + Soda Cloud</small><br> <small>✔️ &nbsp;&nbsp; Compatible with BigQuery, PostgreSQL, Snowflake data sources</small><br> <small>✖️ &nbsp;&nbsp; Supported in Soda Cloud Agreements + Soda Agent</small><br> <br></p> <p><strong>Check suggestions</strong> assists Soda users in auto-generating basic data quality checks using the Soda Checks Language (SodaCL), a domain-specific language for data quality testing.</p> <p>Instead of writing your own data quality checks from scratch, check suggestions profiles your dataset and prompts you through a series of questions so that it can leverage the built-in Soda metrics and quickly prepare data quality checks tailored to that individual dataset.</p> <h4 id="compatibility"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#compatibility" class="anchor-heading" aria-labelledby="compatibility"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Compatibility </h4> <p>You can use check suggestions with the following data sources:</p> <ul> <li>GCP BigQuery</li> <li>PostgreSQL</li> <li>Snowflake</li> </ul> <h4 id="prerequisites-2"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#prerequisites-2" class="anchor-heading" aria-labelledby="prerequisites-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prerequisites </h4> <ul> <li>You have installed Python 3.10 or greater.</li> <li>You have installed a <a href="https://docs.soda.io/soda-library/install.html#install-soda-library-1">Soda Library package</a> for BigQuery, PostgreSQL, or Snowflake in your environment and <a href="https://docs.soda.io/soda-library/install.html#configure-soda">configured</a> it to connect to your data source.</li> </ul> <h4 id="run-check-suggestions"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#run-check-suggestions" class="anchor-heading" aria-labelledby="run-check-suggestions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Run check suggestions </h4> <p>Use the following command to run the check suggestions assisstant. Refer to the table below for input values for the command options.</p> <div class="code-header"> <button class="copy-code-button"> <svg class="copy-icon" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> </button> </div> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>soda suggest <span class="nt">-d</span> adventureworks <span class="nt">-c</span> configuration.yml <span class="nt">-ds</span> dataset_name
</code></pre></div> </div> <div class="table-wrapper"><table> <thead> <tr> <th>Option</th> <th>Required?</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">-d TEXT</code> OR<br> <code class="language-plaintext highlighter-rouge">--datasource TEXT</code></td> <td>required</td> <td>Identify the name of your data source.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">-c TEXT</code> OR<br><code class="language-plaintext highlighter-rouge">--configuration TEXT</code></td> <td>required</td> <td>Identify the filepath and filename of your own <code class="language-plaintext highlighter-rouge">configuration.yml</code> file.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">-o TEXT</code> OR<br><code class="language-plaintext highlighter-rouge">--output-dir TEXT</code></td> <td>optional</td> <td>Specify the output directory for the <code class="language-plaintext highlighter-rouge">checks.yml</code> file check suggestions generates. If you do not specify a location, it saves the <code class="language-plaintext highlighter-rouge">checks.yml</code> file in your current working directory.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">-ds TEXT</code> OR<br><code class="language-plaintext highlighter-rouge">--dataset TEXT</code></td> <td>optional</td> <td>Specify the dataset name for the <code class="language-plaintext highlighter-rouge">checks.yml</code> file. If you do not specify a name, it asks you to identify a dataset during the suggestion workflow.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">--disable-color BOOLEAN</code></td> <td>optional</td> <td>Set to <code class="language-plaintext highlighter-rouge">false</code> if don’t wish to see colors.</td> </tr> </tbody> </table></div> <p>When running, check suggestions automatically prompts you with a series of questions to gather information about your data and the quality checks that you ought to apply. After you answer, or skip the questions, it generates a <code class="language-plaintext highlighter-rouge">checks.yml</code> file with suggested checks based on your input.</p> <p>Following best practice, check suggestions prepares one <code class="language-plaintext highlighter-rouge">checks.yml</code> file per dataset; if you wish, you can run <code class="language-plaintext highlighter-rouge">soda suggest</code> multiple times to prepare suggested checks and <code class="language-plaintext highlighter-rouge">checks.yml</code> files for each dataset in your data source. After it generates the <code class="language-plaintext highlighter-rouge">checks.yml</code> file, you can manually add, remove, or modify data quality checks in the file as you wish.</p> <p>With both a <code class="language-plaintext highlighter-rouge">configuration.yml</code> and a prepared <code class="language-plaintext highlighter-rouge">checks.yml</code> file, you can follow the assistant’s final prompt to run a scan for data quality.</p> <h4 id="select-a-dataset"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#select-a-dataset" class="anchor-heading" aria-labelledby="select-a-dataset"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Select a dataset </h4> <p>Check suggestions prompts you to select a dataset from the list of available datasets in the data source. It prepares one <code class="language-plaintext highlighter-rouge">checks.yml</code> file per dataset.</p> <h4 id="select-checks"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#select-checks" class="anchor-heading" aria-labelledby="select-checks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Select checks </h4> <p>The assistant prompts you to select the checks for basic data quality coverage you wish to include in the <code class="language-plaintext highlighter-rouge">checks.yml</code>. It can prepare only the following types of basic checks:</p> <ul> <li><a href="https://docs.soda.io/soda-cl/schema.html">schema</a></li> <li><a href="https://docs.soda.io/soda-cl/numeric-metrics.html">row count</a></li> <li><a href="https://docs.soda.io/soda-cl/freshness.html">freshness</a></li> <li><a href="https://docs.soda.io/soda-cl/validity-metrics.html">validity</a></li> <li><a href="https://docs.soda.io/soda-cl/missing-metrics.html">missing</a></li> <li><a href="https://docs.soda.io/soda-cl/numeric-metrics.html">duplicate</a></li> </ul> <h4 id="set-column-filtering"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#set-column-filtering" class="anchor-heading" aria-labelledby="set-column-filtering"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Set column filtering </h4> <p>If your dataset contains more than 20 columns, the assisstant prompts you to shorten the list by asking you to select the column names to which you wish to add checks for missing and duplicate values.</p> <h4 id="add-a-schema-check"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#add-a-schema-check" class="anchor-heading" aria-labelledby="add-a-schema-check"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add a schema check </h4> <p>This type of check validates the schema, or structure, of your data. It ensures that the columns you expect to exist are present in the dataset, and that they have the correct data type and index location.</p> <p>Refer to <a href="https://docs.soda.io/soda-cl/schema.html">Schema checks</a> for more information.</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">checks for dataset_A</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">schema</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">Any schema changes</span>
      <span class="na">fail</span><span class="pi">:</span>
        <span class="na">when schema changes</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">column delete</span>
          <span class="pi">-</span> <span class="s">column add</span>
          <span class="pi">-</span> <span class="s">column index change</span>
          <span class="pi">-</span> <span class="s">column type change</span>
</code></pre></div> </div> <h4 id="add-row-count-checks"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#add-row-count-checks" class="anchor-heading" aria-labelledby="add-row-count-checks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add row count checks </h4> <p>This step adds two checks: one to confirm that the dataset is not empty, and one to ensure that the current row count is not significantly different from the expected row count. Soda determines the expected row count relative to the previous row count value using a time series-based anomaly detection model.</p> <p>Refer to <a href="https://docs.soda.io/soda-cl/anomaly-detection.html">Anomaly detection checks</a> for more information.</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">checks for dataset_A</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">row_count &gt; </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">anomaly detection for row_count</span>
</code></pre></div> </div> <h4 id="add-time-based-partitioning"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#add-time-based-partitioning" class="anchor-heading" aria-labelledby="add-time-based-partitioning"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add time-based partitioning </h4> <p>Also referred to as dataset filtering, this step prompts you to specify a time range on which to apply the data quality checks.</p> <p>By default, check suggestions sets the time-based partition to one day if the column contains DATE type data, and the preceding 24 hours if the column contains DATETIME data. When generating a list of candidate columns to which to apply the time-based partition, the assisstant uses heuristic methods to automatically identify and rank column names.</p> <details> <summary style="color:#00BC7E">Read more about heuristic ranking</summary> The heuristic ranking strategy identifies the most suitable columns for effectively partitioning your data. The algorithm it uses for ranking applies several criteria and heuristic scoring to assess the columns' incrementality, standard deviation, maximum date, missing values, and column names. <br> <ol> <li> Incrementality: This criterion checks whether the values in a time-based column incrementally change over time. It assesses if the date or time values consistently increase as new records are added. Columns with higher incrementality scores are more likely to provide a meaningful partitioning mechanism.</li> <li>Standard Deviation: Check suggestions uses standard deviation between dates to assess the uniformity or distribution of values in a time-based column. Columns with low standard deviation indicate that the dates are closely packed together, suggesting a more consistent and evenly-spaced distribution.</li> <li>Maximum Date: This step examines the maximum date value in a column and compares it to the current date. Columns with a maximum date value that is less than the current date receive a higher score. This criterion helps identify columns with recent data.</li> <li>Missing Value: Check suggestions considers the number of missing values in a column; those with fewer missing values receive a higher score. This criterion helps identify columns with more complete data.</li> <li>Column Name: Check suggestions analyzes the names of the columns to determine their relevance for partitioning. The algorithm assigns higher points to columns with names that contain keywords such as "create", "insert", "generate", etc. This criterion aims to identify columns that are likely to represent meaningful, time-based information.</li> </ol> After calculating scores from each of the five criteria, the algorithm combines them to obtain a comprehensive score for each time-based column. The assistant then ranks the columns from highest to lowest score, providing guidance on the partitioning suitability of each column. </details> <p>Refer to <a href="https://docs.soda.io/soda-cl/filters.html#configure-dataset-filters">Configure dataset filters</a> for more information.</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">filter customer [daily]</span><span class="err">:</span>
<span class="na">where</span><span class="pi">:</span> <span class="s">created_at &gt; TIMESTAMP '${NOW}' - interval '1d'</span>

<span class="s">checks for customer [daily]</span><span class="err">:</span>
  <span class="pi">-</span> <span class="s">missing_count(name) &lt; </span><span class="m">5</span>
  <span class="pi">-</span> <span class="s">duplicate_count(phone) = </span><span class="m">0</span>
</code></pre></div> </div> <h4 id="add-a-freshness-check"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#add-a-freshness-check" class="anchor-heading" aria-labelledby="add-a-freshness-check"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add a freshness check </h4> <p>A freshness check ensures that the data in the dataset is up-to-date according to the latest value entered in a column containing date or timestamp values. Check suggestions uses the same heuristic methods with the time based partitioning to rank the columns. After ranking the columns, the CLI estimates the threshold by using the standard error of date differences. It then prompts you to select the column and threshold to use for the freshness check.</p> <p>Refer to <a href="https://docs.soda.io/soda-cl/freshness.html">Freshness checks</a> for more information.</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">checks for dataset_A</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">freshness(date_first_purchase) &lt; 24h</span>
</code></pre></div> </div> <h4 id="add-validity-checks"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#add-validity-checks" class="anchor-heading" aria-labelledby="add-validity-checks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add validity checks </h4> <p>A validity check compares the data in text columns to a specific format (see the list that follows) to determine whether the content is valid. For example, such a check can validate that all rows in an <code class="language-plaintext highlighter-rouge">id</code> column contain UUID-formatted values.</p> <p>Check suggestions prompts you to select the columns that are candidates for validity checks, which must contain text type data such as CHAR, VARCHAR, or TEXT.</p> <p>Valid formats:</p> <ul> <li>UUID</li> <li>email</li> <li>phone number</li> <li>credit card number</li> <li>IP address (IPv4 and IPv6)</li> <li>money</li> <li>timestamp</li> <li>date</li> <li>time</li> </ul> <p>Refer to <a href="https://docs.soda.io/soda-cl/validity-metrics.html">Validity metrics</a> for more information.</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">checks for dataset_A</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">invalid_count(email_address) = 0</span><span class="pi">:</span>
      <span class="na">valid format</span><span class="pi">:</span> <span class="s">email</span>
</code></pre></div> </div> <h4 id="add-missing-checks"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#add-missing-checks" class="anchor-heading" aria-labelledby="add-missing-checks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add missing checks </h4> <p>A missing check automatically identifies any NULL values within your dataset. Check suggestions prompts you to select the columns to which you want to apply a missing check. By default, it sets each check threshold to <code class="language-plaintext highlighter-rouge">0</code>, which means that a check fails if there are any NULL values in the column.</p> <p>Refer to <a href="https://docs.soda.io/soda-cl/missing-metrics.html">Missing metrics</a> for more information.</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">checks for dataset_A</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">missing_count(customer_key) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">missing_count(geography_key) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">missing_count(customer_alternate_key) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">missing_count(title) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">missing_count(first_name) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">missing_count(middle_name) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">missing_count(last_name) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">missing_count(name_style) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">missing_count(birth_date) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">missing_count(marital_status) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">missing_count(suffix) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">missing_count(gender) = </span><span class="m">0</span>
</code></pre></div> </div> <h4 id="add-duplicate-checks"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#add-duplicate-checks" class="anchor-heading" aria-labelledby="add-duplicate-checks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add duplicate checks </h4> <p>A duplicate check identifies duplicate records or entries within your dataset. By default, it sets each check threshold to <code class="language-plaintext highlighter-rouge">0</code>, which means that a check fails if there are any duplicate values in the column.</p> <p>Refer to <a href="https://docs.soda.io/soda-cl/numeric-metrics.html#list-of-numeric-metrics">Numeric metrics</a> for more information.</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">checks for dataset_A</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">duplicate_count(customer_key) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">duplicate_count(geography_key) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">duplicate_count(customer_alternate_key) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">duplicate_count(title) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">duplicate_count(first_name) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">duplicate_count(middle_name) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">duplicate_count(last_name) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">duplicate_count(name_style) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">duplicate_count(birth_date) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">duplicate_count(marital_status) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">duplicate_count(suffix) = </span><span class="m">0</span>
  <span class="pi">-</span> <span class="s">duplicate_count(gender) = </span><span class="m">0</span>
</code></pre></div> </div> <h3 id="programmatically-add-checks"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#programmatically-add-checks" class="anchor-heading" aria-labelledby="programmatically-add-checks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Programmatically add checks </h3> <p><small>✔️ &nbsp;&nbsp; Some checks require Soda Core Scientific</small><br> <small>✔️ &nbsp;&nbsp; Some checks supported in Soda Core</small><br> <small>✔️ &nbsp;&nbsp; Supported in Soda Library + Soda Cloud</small><br> <small>✖️ &nbsp;&nbsp; Supported in Soda Cloud Agreements + Soda Agent</small><br> <br></p> <p>Follow the <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#manually-write-sodacl-checks">steps above</a> to create a <code class="language-plaintext highlighter-rouge">checks.yml</code> file to define your checks for data quality. Then, add the file(s) to your Python program as in the example below.<br> Be sure to include any variables in your programmatic scan <em>before</em> the check YAML files. Soda requires the variable input for any variables defined in the check YAML files.</p> <div class="code-header"> <button class="copy-code-button"> <svg class="copy-icon" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> </button> </div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">soda.scan</span> <span class="kn">import</span> <span class="n">Scan</span>

<span class="n">scan</span> <span class="o">=</span> <span class="n">Scan</span><span class="p">()</span>
<span class="n">scan</span><span class="p">.</span><span class="n">set_data_source_name</span><span class="p">(</span><span class="s">"events"</span><span class="p">)</span>

<span class="n">scan</span><span class="p">.</span><span class="n">add_configuration_yaml_file</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="s">"~/.soda/my_local_soda_environment.yml"</span><span class="p">)</span>


<span class="c1"># Add variables
###############
</span><span class="n">scan</span><span class="p">.</span><span class="n">add_variables</span><span class="p">({</span><span class="s">"date"</span><span class="p">:</span> <span class="s">"2022-01-01"</span><span class="p">})</span>


<span class="c1"># Add check YAML files
##################
</span><span class="n">scan</span><span class="p">.</span><span class="n">add_sodacl_yaml_file</span><span class="p">(</span><span class="s">"./my_programmatic_test_scan/sodacl_file_one.yml"</span><span class="p">)</span>
<span class="n">scan</span><span class="p">.</span><span class="n">add_sodacl_yaml_file</span><span class="p">(</span><span class="s">"./my_programmatic_test_scan/sodacl_file_two.yml"</span><span class="p">)</span>
<span class="n">scan</span><span class="p">.</span><span class="n">add_sodacl_yaml_files</span><span class="p">(</span><span class="s">"./my_scan_dir"</span><span class="p">)</span>
<span class="n">scan</span><span class="p">.</span><span class="n">add_sodacl_yaml_files</span><span class="p">(</span><span class="s">"./my_scan_dir/sodacl_file_three.yml"</span><span class="p">)</span>
</code></pre></div> </div> </div> </div> </div> <h2 id="next"> <a href="https://docs.soda.io/soda-cl/soda-cl-overview.html#next" class="anchor-heading" aria-labelledby="next"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Next </h2> <ol> <li> <s><font color="#777777"> Choose a flavor of Soda </font></s> </li> <li> <s><font color="#777777">Set up Soda: install, deploy, or invoke</font></s> </li> <li> <s><font color="#777777">Write SodaCL checks</font></s> </li> <li><strong><a href="https://docs.soda.io/soda-library/run-a-scan.html">Run scans and review results</a></strong></li> <li>Organize, alert, investigate</li> </ol> <p>Need help? Join the <a href="https://community.soda.io/slack" target="_blank"> Soda community on Slack</a>. <br></p><hr> <p>Was this documentation helpful?</p> <!-- LikeBtn.com BEGIN --> <p><span class="likebtn-wrapper lb-loaded lb-style-tick lb-popup-position-top lb-popup-style-light" data-theme="tick" data-i18n_like="Yes" data-ef_voting="grow" data-show_dislike_label="true" data-counter_zero_show="true" data-i18n_dislike="No"><span class="likebtn-button lb-like lb-ef-grow" id="lb-like-0"><span onclick="LikeBtn.vote(1, 0, event);" class="lb-a" data-lb_index="0"><i class="lb-tt lb-tooltip-tt"><i class="lb-tt-lt"></i><i class="lb-tt-rt"></i><i class="lb-tt-m">I like this</i><i class="lb-tt-mu">Unlike</i><i class="lb-tt-m2"></i><i class="lb-tt-lb"></i><i class="lb-tt-rb"></i><i class="lb-tt-a"></i></i><span class="likebtn-icon lb-like-icon">&nbsp;</span><span class="likebtn-label lb-like-label">Yes</span></span><span class="lb-count" data-count="6">6</span></span><span class="likebtn-button lb-dislike  lb-ef-grow" id="lb-dislike-0"><span onclick="LikeBtn.vote(-1, 0, event);" class="lb-a" data-lb_index="0"><i class="lb-tt lb-tooltip-tt"><i class="lb-tt-lt"></i><i class="lb-tt-rt"></i><i class="lb-tt-m">I dislike this</i><i class="lb-tt-mu">Undislike</i><i class="lb-tt-m2"></i><i class="lb-tt-lb"></i><i class="lb-tt-rb"></i><i class="lb-tt-a"></i></i><span class="likebtn-icon lb-dislike-icon">&nbsp;</span><span class="likebtn-label lb-dislike-label">No</span></span><span class="lb-count" data-count="1">1</span></span></span> <script>(function(d,e,s){if(d.getElementById("likebtn_wjs"))return;a=d.createElement(e);m=d.getElementsByTagName(e)[0];a.async=1;a.id="likebtn_wjs";a.src=s;m.parentNode.insertBefore(a, m)})(document,"script","//w.likebtn.com/js/w/widget.js");</script> <!-- LikeBtn.com END --></p> <p>What could we do to improve this page?</p> <ul> <li>Suggest a docs change in <a href="https://github.com/sodadata/docs/issues/new" target="_blank">GitHub</a>.</li> <li>Share feedback in the <a href="https://community.soda.io/slack" target="_blank"> Soda community on Slack</a>.</li> </ul> <p><em>Documentation always applies to the latest version of Soda products</em><br> <em>Last modified on 29-May-24</em><br></p> <p><a href="https://cloud.soda.io/signup?utm_source=docs" target="_blank" class="signup-button">Sign up for Soda</a></p> </div> </div> <div class="search-overlay"></div> </div>  
<iframe allow="join-ad-interest-group" data-tagging-id="G-R6YJ1X2PYS" data-load-time="1717503267765" height="0" width="0" src="./soda-cl_files/rul.html" style="display: none; visibility: hidden;"></iframe><iframe name="__uspapiLocator" tabindex="-1" role="presentation" aria-hidden="true" title="Blank" style="display: none; position: absolute; width: 1px; height: 1px; top: -9999px;" src="./soda-cl_files/saved_resource.html"></iframe><iframe tabindex="-1" role="presentation" aria-hidden="true" title="Blank" src="./soda-cl_files/bc-v4.min.html" style="position: absolute; width: 1px; height: 1px; top: -9999px;"></iframe><img id="CookiebotSessionPixel" src="./soda-cl_files/1.gif" alt="Cookiebot session tracker icon loaded" data-cookieconsent="ignore" style="display: none;"></body></html>